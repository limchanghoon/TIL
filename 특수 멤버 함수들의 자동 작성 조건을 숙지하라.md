---


---

<h1 id="특수-멤버-함수들의-자동-작성-조건을-숙지하라">특수 멤버 함수들의 자동 작성 조건을 숙지하라</h1>
<p><code>특수 멤버 함수</code>들은 C++이 기꺼이 작성하는 멤버 함수들을 가리킨다. 기본 생성자, 소멸자, 복사 생성자, 복사 배정 연사자가 있다.<br>
기본 생성자는 클래스에 생성자가 하나도 선언되어 있지 않을 때 생성된다. 작성된 특수 멤버 함수들은 암묵적으로 public이자 inline이며, 가상 소멸자가 있는 기반 클래스를 상속하는 파생 클래스의 소멸자를 제외하고는 nonvirtual이다.(반대 경우는 virtual)<br>
C++11에서는 이동 생성자와 이동 배정 연산자가 추가됐다.</p>
<pre class=" language-c"><code class="prism ++ language-c"><span class="token function">Widget</span><span class="token punctuation">(</span>Widget<span class="token operator">&amp;&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">// 이동 생성자</span>
Widget<span class="token operator">&amp;</span> operator<span class="token operator">=</span><span class="token punctuation">(</span>Widget<span class="token operator">&amp;&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 이동 배정 연산자</span>
</code></pre>
<p><code>복사 연산은 서로 독립적이다.</code> 복사 생성자를 선언했지만 복사 배정 연산자는 선언하지 않았다면, 그러나 복사 배정 연산이 필요한 클라이언트 코드를 작성했다면, 컴파일러가 자동으로 복사 배정 연산자를 작성한다. 반대도 똑같다.<br>
<code>이동 연산은 독립적이지 않다.</code> 어느 하나가 선언돼 있으면 다른 하나는 자동 생성되지 않는다.</p>
<p>복사 연산을 하나라도 <code>명시적으로 선언하면</code> 이동 연산들이 자동으로 작성되지 않는다.<br>
반대로 이동 연산들을 하나라도 명시적으로 선언하면 복사 연산들이 자동으로 작성되지 않는다.</p>
<ul>
<li>3의 법칙 : 만일 <code>복사 생성자</code>와 복사 <code>배정 연산자</code>, <code>소멸자</code> 중 하나라도 선언했다면 나머지 둘도 선언해야 한다.</li>
<li>사용자 선언 소멸자가 있는 클래스는 이동 연산들을 작성하지 않는다.</li>
</ul>
<p>사용자 정의 소멸자를 선언했지만 기본 복사 생성자와 기본 복사 배정을 사용하고 싶을 때</p>
<pre class=" language-c"><code class="prism ++ language-c">class Widget<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token operator">~</span><span class="token function">Widget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>										<span class="token comment">// 사용자 정의 소멸자</span>
	
	<span class="token function">Widget</span><span class="token punctuation">(</span><span class="token keyword">const</span> Widget<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>				<span class="token comment">// 기본 복사 생성자</span>
	
	Widget<span class="token operator">&amp;</span> operator<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Widget<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>		<span class="token comment">// 기본 복사 배정</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>소멸자를 virtual로 선언하지만 기본 구현이 적합한 경우도 있다. 그럴 때 <code>=default</code>를 선언하면 좋다. 그리고 소멸자를 직접 선언하면 이동 연산들의 자동 작성이 금지되니  이동 연산들을 <code>=default</code>로 선언. 이동 생성자를 직접 선언하면 복사 연산들의 자동 작성이 금지되니 복사 연산들을 <code>=default</code>로 선언.</p>
<p>멤버 함수 템플릿이 존재해도 특수 멤버 함수는 자동 작성됨.</p>
<pre class=" language-c"><code class="prism ++ language-c">class Widget<span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	template<span class="token operator">&lt;</span>typename T<span class="token operator">&gt;</span>
	<span class="token function">Widget</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	template<span class="token operator">&lt;</span>typename T<span class="token operator">&gt;</span>
	Widget<span class="token operator">&amp;</span> operator<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

